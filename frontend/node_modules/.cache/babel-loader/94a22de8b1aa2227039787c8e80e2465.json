{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/app/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/app/src/components/HelloWorld.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/src/components/HelloWorld.vue","mtime":1711277475959},{"path":"/app/babel.config.js","mtime":1710746905612},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1710760179457},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1710760179450},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1710760179457},{"path":"/app/node_modules/vue-loader-v16/dist/index.js","mtime":1710760193665}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IG1hcmtkb3duSXQgZnJvbSAibWFya2Rvd24taXQiOwppbXBvcnQgeyBMYXlvdXQsIFR5cG9ncmFwaHksIENhcmQsIEJ1dHRvbiwgVXBsb2FkLCBtZXNzYWdlIH0gZnJvbSAiYW50LWRlc2lnbi12dWUiOwppbXBvcnQgeyBVcGxvYWRPdXRsaW5lZCB9IGZyb20gIkBhbnQtZGVzaWduL2ljb25zLXZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRG9jdW1lbnRRdWVzdGlvbkFuc3dlcmluZyIsCiAgY29tcG9uZW50czogewogICAgImEtbGF5b3V0IjogTGF5b3V0LAogICAgImEtbGF5b3V0LWNvbnRlbnQiOiBMYXlvdXQuQ29udGVudCwKICAgICJhLXR5cG9ncmFwaHkiOiBUeXBvZ3JhcGh5LAogICAgImEtY2FyZCI6IENhcmQsCiAgICAiYS11cGxvYWQiOiBVcGxvYWQsCiAgICAiYS1idXR0b24iOiBCdXR0b24sCiAgICAidXBsb2FkLWljb24iOiBVcGxvYWRPdXRsaW5lZAogIH0sCiAgc2V0dXAoKSB7CiAgICBjb25zdCBmaWxlID0gcmVmKG51bGwpOwogICAgbGV0IHF1ZXJ5ID0gInF1ZXJ5IDEiOwogICAgY29uc3QgYXBpUmVzcG9uc2UgPSByZWYobnVsbCk7CiAgICBjb25zdCBzdWJtaXR0aW5nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVwbG9hZCA9ICgpID0+IHsKICAgICAgZmlsZS52YWx1ZSA9IG51bGw7CiAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUZpbGVVcGxvYWQgPSBpbmZvID0+IHsKICAgICAgY29uc29sZS5sb2coaW5mbyk7CiAgICAgIGZpbGUudmFsdWUgPSBpbmZvLmZpbGU7CiAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGlmIHBkZgogICAgICBpZiAoZmlsZS52YWx1ZS50eXBlICE9PSAiYXBwbGljYXRpb24vcGRmIikgewogICAgICAgIG1lc3NhZ2UuZXJyb3IoIlBsZWFzZSB1cGxvYWQgYSBQREYgZmlsZS4iKTsKICAgICAgICBmaWxlLnZhbHVlID0gbnVsbDsKICAgICAgfQoKICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBpcyB1bmRlciAxMDBNQgogICAgICBpZiAoZmlsZS52YWx1ZS5zaXplID4gMTAgKiAxMDI0ICogMTAyNCkgewogICAgICAgIG1lc3NhZ2UuZXJyb3IoIkZpbGUgc2l6ZSBtdXN0IGJlIHNtYWxsZXIgdGhhbiAxME1CISIpOwogICAgICAgIGZpbGUudmFsdWUgPSBudWxsOwogICAgICB9CiAgICB9OwogICAgY29uc3QgdXBkYXRlUXVlcnkgPSBldmVudCA9PiB7CiAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgfTsKICAgIGNvbnN0IHN1Ym1pdERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICAgIHN1Ym1pdHRpbmcudmFsdWUgPSB0cnVlOwogICAgICBpZiAoIWZpbGUudmFsdWUpIHsKICAgICAgICBtZXNzYWdlLmVycm9yKCJQbGVhc2Ugc2VsZWN0IGEgZmlsZS4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUudmFsdWUub3JpZ2luRmlsZU9iaik7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgicXVlcnkiLCBxdWVyeSk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCJodHRwczovL3JhZ2JhY2tlbmQuYXp1cmV3ZWJzaXRlcy5uZXQvL3ByZWRpY3QiLCBmb3JtRGF0YSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYXBpUmVzcG9uc2UudmFsdWUgPSByZXNwb25zZS5kYXRhLnJlc3VsdDsKICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoIkRhdGEgc3VibWl0dGVkIHN1Y2Nlc3NmdWxseS4iKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJBUEkgcmVxdWVzdCBmYWlsZWQ6IiwgZXJyb3IpOwogICAgICAgIG1lc3NhZ2UuZXJyb3IoIkZhaWxlZCB0byBnZXQgcmVzcG9uc2UgZnJvbSB0aGUgQVBJLiIpOwogICAgICAgIGFwaVJlc3BvbnNlLnZhbHVlID0gbnVsbDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBzdWJtaXR0aW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCByZW5kZXJNYXJrZG93biA9IHRleHQgPT4gewogICAgICBjb25zdCBtZCA9IG5ldyBtYXJrZG93bkl0KCk7CiAgICAgIHJldHVybiBtZC5yZW5kZXIodGV4dCk7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZmlsZSwKICAgICAgcXVlcnksCiAgICAgIGFwaVJlc3BvbnNlLAogICAgICB1cGRhdGVRdWVyeSwKICAgICAgaGFuZGxlQmVmb3JlVXBsb2FkLAogICAgICBoYW5kbGVGaWxlVXBsb2FkLAogICAgICBzdWJtaXREYXRhLAogICAgICByZW5kZXJNYXJrZG93bgogICAgfTsKICB9Cn07"},{"version":3,"names":["ref","axios","markdownIt","Layout","Typography","Card","Button","Upload","message","UploadOutlined","name","components","Content","setup","file","query","apiResponse","submitting","handleBeforeUpload","value","handleFileUpload","info","console","log","type","error","size","updateQuery","event","target","submitData","formData","FormData","append","originFileObj","response","post","headers","data","result","success","renderMarkdown","text","md","render"],"sources":["/app/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <a-layout class=\"layout\">\n    <a-layout-content :style=\"{ padding: '50px' }\">\n      <div class=\"container\" style=\"text-align: left\">\n        <a-typography>\n          <h1 class=\"title\">Document Question Answering</h1>\n        </a-typography>\n        <a-card>\n          <a-input\n            @change=\"updateQuery\"\n            class=\"input\"\n            placeholder=\"Enter query text\"\n          />\n          <div v-if=\"file\" class=\"file-name\">\n            <p>Uploaded File: {{ file.name }}</p>\n          </div>\n          <a-col>\n            <a-upload\n              class=\"upload-btn\"\n              :before-upload=\"handleBeforeUpload\"\n              :show-upload-list=\"false\"\n              @change=\"handleFileUpload\"\n            >\n              <a-button type=\"primary\" ghost>\n                <upload-icon /> Click to Upload\n              </a-button>\n            </a-upload>\n            <span>&nbsp;&nbsp;</span>\n            <a-button\n              type=\"primary\"\n              @click=\"submitData\"\n              class=\"submit-button\"\n              :disabled=\"submitting\"\n            >\n              Submit\n            </a-button>\n          </a-col>\n\n          <a-typography>\n            <h3 class=\"response-title\" style=\"text-align: left\">Results</h3>\n          </a-typography>\n\n          <a-typography class=\"primary\" style=\"font-size: 20px; width: 1200px\">\n            {{ apiResponse }}\n          </a-typography>\n        </a-card>\n      </div>\n    </a-layout-content>\n  </a-layout>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport markdownIt from \"markdown-it\";\nimport {\n  Layout,\n  Typography,\n  Card,\n  Button,\n  Upload,\n  message,\n} from \"ant-design-vue\";\nimport { UploadOutlined } from \"@ant-design/icons-vue\";\n\nexport default {\n  name: \"DocumentQuestionAnswering\",\n  components: {\n    \"a-layout\": Layout,\n    \"a-layout-content\": Layout.Content,\n    \"a-typography\": Typography,\n    \"a-card\": Card,\n    \"a-upload\": Upload,\n    \"a-button\": Button,\n    \"upload-icon\": UploadOutlined,\n  },\n\n  setup() {\n    const file = ref(null);\n    let query = \"query 1\";\n    const apiResponse = ref(null);\n    const submitting = ref(false);\n\n    const handleBeforeUpload = () => {\n      file.value = null;\n      return true;\n    };\n\n    const handleFileUpload = (info) => {\n      console.log(info);\n      file.value = info.file;\n      // Check if the file if pdf\n      if (file.value.type !== \"application/pdf\") {\n        message.error(\"Please upload a PDF file.\");\n        file.value = null;\n      }\n\n      // Check if file is under 100MB\n      if (file.value.size > 10 * 1024 * 1024) {\n        message.error(\"File size must be smaller than 10MB!\");\n        file.value = null;\n      }\n    };\n\n    const updateQuery = (event) => {\n      query = event.target.value;\n    };\n\n    const submitData = async () => {\n      submitting.value = true;\n\n      if (!file.value) {\n        message.error(\"Please select a file.\");\n        return;\n      }\n\n      let formData = new FormData();\n      formData.append(\"file\", file.value.originFileObj);\n      formData.append(\"query\", query);\n\n      try {\n        const response = await axios.post(\n          \"https://ragbackend.azurewebsites.net//predict\",\n          formData,\n          {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n            },\n          }\n        );\n\n        apiResponse.value = response.data.result;\n        message.success(\"Data submitted successfully.\");\n      } catch (error) {\n        console.error(\"API request failed:\", error);\n        message.error(\"Failed to get response from the API.\");\n        apiResponse.value = null;\n      } finally {\n        submitting.value = false;\n      }\n    };\n\n    const renderMarkdown = (text) => {\n      const md = new markdownIt();\n      return md.render(text);\n    };\n\n    return {\n      file,\n      query,\n      apiResponse,\n      updateQuery,\n      handleBeforeUpload,\n      handleFileUpload,\n      submitData,\n      renderMarkdown,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  margin: 0 auto;\n}\n\n.title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.input {\n  margin-top: 20px;\n  font-size: 30px;\n}\n\n.submit-button {\n  width: 20%;\n  margin-top: 20px; /* Added margin for spacing */\n}\n\n.upload-btn {\n  margin-bottom: 20px; /* Added margin for spacing */\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}